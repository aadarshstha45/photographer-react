import{A as y,m as F,r as s,k as z,j as t,F as j,T as n,H as W}from"./index-BrFnNaW-.js";import{A as C}from"./index-BR7hx48I.js";import{D as I,S as L}from"./Table-Djyq2yIe.js";import"./lodash-CTf_AifH.js";import{D as N}from"./DeleteAlert-B0gq_10W.js";import{u as R,a as k}from"./service-form-methods-BHo5smMZ.js";import"./Trash-CKxNiQPO.js";import"./inputProps-BdeSOXki.js";import"./modal-overlay-BbPkFkR7.js";import"./tslib.es6-KGZ4s6vb.js";const v=({page:o=1,perPage:i=10})=>R({apiEndpoint:y.Message.get({page:o,perPage:i}),queryKey:["message"]}),H=()=>k({apiEndpoint:y.Message.delete,invalidateEndpoints:["message"],method:"DELETE",showMessage:!0}),Z=()=>{var h,m,x,f,S;const o=F(),i=new URLSearchParams(o.search),r=Number(i.get("page"))||1;s.useEffect(()=>{u(r)},[r]);const[d,u]=s.useState(1),[l,O]=s.useState(10),[D,g]=s.useState(""),[E,c]=s.useState(null),{isOpen:M,onOpen:T,onClose:p}=z(),{mutateAsync:b,isPending:A}=H();s.useEffect(()=>{u(r)},[r]);const K=[{header:"S.N",accessorKey:"sn",cell:({row:a})=>t.jsxs(n,{children:[" ",l*(d-1)+(a.index+1)," "]}),enableSorting:!1},{header:"Name",accessorKey:"name",cell:({row:a})=>t.jsx(n,{textTransform:"capitalize",fontWeight:500,children:a.original.name})},{header:"Email",accessorKey:"email",cell:({row:a})=>t.jsx(n,{textTransform:"capitalize",children:a.original.email}),enableSorting:!1},{header:"Address",accessorKey:"address",cell:({row:a})=>t.jsx(n,{textTransform:"capitalize",fontWeight:500,children:a.original.address}),enableSorting:!1},{header:"Message",accessorKey:"message",cell:({row:a})=>t.jsx(n,{textTransform:"capitalize",fontWeight:500,children:a.original.message}),enableSorting:!1},{header:"Phone",accessorKey:"phone",cell:({row:a})=>t.jsx(n,{textTransform:"capitalize",fontWeight:500,children:a.original.phone}),enableSorting:!1},{header:"Actions",accessorKey:"actions",cell:({row:a})=>{const{id:w}=a.original;return t.jsx(W,{children:t.jsx(C,{handleDelete:()=>{c(w),T()}})})}}],{data:e,isPending:P}=v({page:r,perPage:l});return t.jsxs(j,{flexDir:"column",gap:4,children:[t.jsx(I,{columns:K,data:((h=e==null?void 0:e.data)==null?void 0:h.rows)??[],isLoading:P,count:(e==null?void 0:e.data.count)??0,filter:{globalFilter:D,setGlobalFilter:g},pagination:(e==null?void 0:e.data.count)??!1?{manual:!0,pageCount:(x=(m=e==null?void 0:e.data)==null?void 0:m.pagination)==null?void 0:x.last_page,totalRows:(S=(f=e==null?void 0:e.data)==null?void 0:f.pagination)==null?void 0:S.total,pageParams:{pageIndex:d,pageSize:l}}:void 0,children:t.jsx(j,{justify:"space-between",align:"center",children:t.jsx(L,{placeholder:"Search Messages",maxW:"300px",onSearch:g})})}),t.jsx(N,{isOpen:M,onClose:()=>{p(),c(null)},onDelete:async()=>{await b({id:E}),p(),c(null)},heading:"Delete Message?",message:"Are you sure you want to delete this message?",isDeleting:A})]})};export{Z as default};
