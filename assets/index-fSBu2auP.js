import{f as k,a as _,j as e,e as v,g as A,h as C,F as B,i as D,B as w,r as y,t as E,k as U,H}from"./index-DyjPmHh2.js";import{A as N}from"./index-BVsmfkku.js";import{S as P}from"./StatusSwitch-BoN-ei5C.js";import{D as T,S as K}from"./Table-BVn4qtQQ.js";import{u as O,a as R}from"./service-user-CAC42XXU.js";import{u as G,T as b}from"./index-DGGATZOe.js";import{u as z,a as I,M as W,b as L,c as V,d as q}from"./modal-overlay-B3RzokUX.js";import{M as J,a as Q}from"./modal-header-DruoH1rk.js";import"./lodash-MsvIzqMc.js";import{S as X}from"./index-ijY64M_a.js";import{u as Y}from"./useGetDirtyData-Dc4_-Xhu.js";import{u as Z}from"./useGetErrors-Bhs_yQR9.js";import"./Trash-CLOyVgN0.js";import"./service-form-methods--yukZyD2.js";import"./visually-hidden.style-Bfr07Aua.js";import"./inputProps-DUnb2QB6.js";import"./tslib.es6-KGZ4s6vb.js";const F=k((i,a)=>{const{onClick:t,className:s,...o}=i,{onClose:l}=z(),n=_("chakra-modal__close-btn",s),c=I();return e.jsx(v,{ref:a,__css:c.closeButton,className:n,onClick:A(t,r=>{r.stopPropagation(),l()}),...o})});F.displayName="ModalCloseButton";const $=({isOpen:i,onClose:a,heading:t,isFetching:s,id:o,onSubmit:l,isLoading:n,children:c,formId:r="form"})=>{const m=C("white","gray.800"),d=C("gray.50","gray.900");return e.jsxs(W,{isOpen:i,onClose:a,motionPreset:"slideInTop",preserveScrollBarGap:!0,isCentered:!0,children:[e.jsx(L,{}),e.jsxs(V,{overflow:"hidden",borderRadius:10,pos:"fixed",maxH:"99dvh",maxW:{base:"98%",md:"60%"},bg:m,children:[e.jsx(F,{}),e.jsx(J,{bg:d,fontWeight:"bold",children:t}),s&&o?e.jsx(B,{justify:"center",align:"center",h:"50vh",children:e.jsx(D,{size:"xl",thickness:"4px",speed:"0.65s",color:"primary.500"})}):e.jsx(q,{as:"form",id:r,onSubmit:l,maxH:window.innerHeight-200,overflow:"auto",children:c}),e.jsxs(Q,{gap:2,children:[e.jsx(w,{colorScheme:"red",variant:"outline",onClick:a,children:"Close"}),e.jsx(w,{form:r,type:"submit",isLoading:n,children:"Submit"})]})]})]})},ee=({isOpen:i,onClose:a,id:t})=>{const s={name:"",email:"",password:"",password_confirmation:"",is_active:"1"},{control:o,handleSubmit:l,reset:n,formState:c}=G({defaultValues:s}),{mutateAsync:r,isPending:m,isError:d,error:u}=O(),[x,p]=y.useState({});y.useEffect(()=>{p(d?Z(u):{})},[d,u]);const f=async g=>{const j=t?E(Y(c,g)):E(g);await r({data:j}),a(),n(s)};return e.jsxs($,{heading:t?"Edit User":"Add User",id:t,isOpen:i,onClose:()=>{a(),p({}),n(s)},onSubmit:l(f),isLoading:m,children:[e.jsx(b,{name:"name",control:o,label:"Name",backendError:x.name}),e.jsx(b,{name:"email",control:o,label:"Email",type:"email",backendError:x.email}),e.jsx(b,{name:"password",control:o,label:"Password"}),e.jsx(b,{name:"password_confirmation",control:o,label:"Confirm Password"}),e.jsx(X,{control:o})]})},je=()=>{var r,m,d,u,x,p,f,g,j;const i=[{header:"S.No",accessorKey:"sn",cell:({row:h})=>h.index+1,enableSorting:!1},{header:"Name",accessorKey:"name"},{header:"Email",accessorKey:"email"},{header:"Status",accessorKey:"status",cell:({row:h})=>{const{is_active:S,id:M}=h.original;return e.jsx(P,{id:M,isActive:S,model:"user"})},enableSorting:!1},{header:"Action",accessorKey:"action",cell:({row:h})=>{const{id:S}=h.original;return e.jsx(N,{handleDelete:()=>console.log("Delete",S),handleEdit:()=>console.log("Edit",S)})},enableSorting:!1}],{data:a,isPending:t}=R(),[s,o]=y.useState(""),{isOpen:l,onOpen:n,onClose:c}=U();return y.useEffect(()=>{console.log({searchText:s})},[s]),e.jsxs(e.Fragment,{children:[e.jsx(T,{columns:i,data:((r=a==null?void 0:a.data)==null?void 0:r.rows)??[],count:(a==null?void 0:a.data.count)??0,filter:{globalFilter:s,setGlobalFilter:o},pagination:{manual:!0,pageCount:((d=(m=a==null?void 0:a.data)==null?void 0:m.pagination)==null?void 0:d.last_page)??0,totalRows:((x=(u=a==null?void 0:a.data)==null?void 0:u.pagination)==null?void 0:x.total)??0,pageParams:{pageIndex:((f=(p=a==null?void 0:a.data)==null?void 0:p.pagination)==null?void 0:f.current_page)??0,pageSize:((j=(g=a==null?void 0:a.data)==null?void 0:g.pagination)==null?void 0:j.per_page)??0}},isLoading:t,children:e.jsxs(H,{justify:"space-between",align:"center",gap:4,children:[e.jsx(K,{placeholder:"Search Users",maxW:"300px",onSearch:o}),e.jsx(w,{size:"lg",onClick:n,children:"Add User"})]})}),e.jsx(ee,{isOpen:l,onClose:c})]})};export{je as default};
