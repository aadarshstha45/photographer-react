var E=e=>{throw TypeError(e)};var K=(e,t,s)=>t.has(e)||E("Cannot "+s);var a=(e,t,s)=>(K(e,t,"read from private field"),s?s.call(e):t.get(e)),m=(e,t,s)=>t.has(e)?E("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),v=(e,t,s,r)=>(K(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),g=(e,t,s)=>(K(e,t,"access private method"),s);import{l as k,ab as R,ac as T,ad as q,ae as B,af as L,ag as P,r as S,ah as F,ai as U,aj as w,ak as M,al as Q,am as C,A as j}from"./index-BPUmNHL1.js";const H=k("div");H.displayName="Box";var b,y,n,c,l,x,D,A,I=(A=class extends R{constructor(t,s){super();m(this,l);m(this,b);m(this,y);m(this,n);m(this,c);v(this,b,t),this.setOptions(s),this.bindMethods(),g(this,l,x).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=a(this,b).defaultMutationOptions(t),T(this.options,s)||a(this,b).getMutationCache().notify({type:"observerOptionsUpdated",mutation:a(this,n),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&q(s.mutationKey)!==q(this.options.mutationKey)?this.reset():((r=a(this,n))==null?void 0:r.state.status)==="pending"&&a(this,n).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=a(this,n))==null||t.removeObserver(this)}onMutationUpdate(t){g(this,l,x).call(this),g(this,l,D).call(this,t)}getCurrentResult(){return a(this,y)}reset(){var t;(t=a(this,n))==null||t.removeObserver(this),v(this,n,void 0),g(this,l,x).call(this),g(this,l,D).call(this)}mutate(t,s){var r;return v(this,c,s),(r=a(this,n))==null||r.removeObserver(this),v(this,n,a(this,b).getMutationCache().build(a(this,b),this.options)),a(this,n).addObserver(this),a(this,n).execute(t)}},b=new WeakMap,y=new WeakMap,n=new WeakMap,c=new WeakMap,l=new WeakSet,x=function(){var s;const t=((s=a(this,n))==null?void 0:s.state)??B();v(this,y,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},D=function(t){L.batch(()=>{var s,r,u,f,d,i,o,O;if(a(this,c)&&this.hasListeners()){const h=a(this,y).variables,p=a(this,y).context;(t==null?void 0:t.type)==="success"?((r=(s=a(this,c)).onSuccess)==null||r.call(s,t.data,h,p),(f=(u=a(this,c)).onSettled)==null||f.call(u,t.data,null,h,p)):(t==null?void 0:t.type)==="error"&&((i=(d=a(this,c)).onError)==null||i.call(d,t.error,h,p),(O=(o=a(this,c)).onSettled)==null||O.call(o,void 0,t.error,h,p))}this.listeners.forEach(h=>{h(a(this,y))})})},A);function N(e,t){const s=P(),[r]=S.useState(()=>new I(s,e));S.useEffect(()=>{r.setOptions(e)},[r,e]);const u=S.useSyncExternalStore(S.useCallback(d=>r.subscribe(L.batchCalls(d)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),f=S.useCallback((d,i)=>{r.mutate(d,i).catch(F)},[r]);if(u.error&&U(r.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:f,mutateAsync:u.mutate}}const z=({apiEndpoint:e,enabled:t,queryKey:s})=>w({queryKey:s??[e],queryFn:()=>C.get(e),select:u=>u.data,placeholderData:Q,enabled:t??!0}),V=({apiEndpoint:e,invalidateEndpoints:t,showMessage:s,message:r,method:u})=>{const f=P();return N({mutationKey:[e],mutationFn:({id:i,data:o})=>u==="PUT"?C.put(e.replace(":id",i),o):u==="DELETE"?C.delete(e.replace(":id",i)):u==="PATCH"?C.patch(e.replace(":id",i),o):u==="POST"&&i?C.post(e.replace(":id",i),o):C.post(e,o),onSuccess:i=>{t&&t.forEach(o=>{f.invalidateQueries({queryKey:[o]})}),!s&&r?M.success(r):s&&!r&&M.success(i.data.message)},onError:i=>{var o,O,h,p;M.error(s?((O=(o=i==null?void 0:i.response)==null?void 0:o.data)==null?void 0:O.error)??((p=(h=i==null?void 0:i.response)==null?void 0:h.data)==null?void 0:p.message)??"An error occurred. Please try again later":null)}})},W=()=>z({apiEndpoint:j.Category.getList,queryKey:["categoryList"]});export{H as B,W as a,z as b,V as u};
