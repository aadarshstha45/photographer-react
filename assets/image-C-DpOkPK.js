import{r as b,q as N,i as v,j as k,s as S,l as j}from"./index-DeVVJv4C.js";function w(c){const{loading:e,src:s,srcSet:o,onLoad:r,onError:t,crossOrigin:i,sizes:d,ignoreFallback:u}=c,[l,f]=b.useState("pending");b.useEffect(()=>{f(s?"loading":"pending")},[s]);const n=b.useRef(),h=b.useCallback(()=>{if(!s)return;g();const a=new Image;a.src=s,i&&(a.crossOrigin=i),o&&(a.srcset=o),d&&(a.sizes=d),e&&(a.loading=e),a.onload=m=>{g(),f("loaded"),r==null||r(m)},a.onerror=m=>{g(),f("failed"),t==null||t(m)},n.current=a},[s,i,o,d,r,t,e]),g=()=>{n.current&&(n.current.onload=null,n.current.onerror=null,n.current=null)};return N(()=>{if(!u)return l==="loading"&&h(),()=>{g()}},[l,h,u]),u?"loaded":l}const O=(c,e)=>c!=="loaded"&&e==="beforeLoadOrError"||c==="failed"&&e==="onError",I=v(function(e,s){const{htmlWidth:o,htmlHeight:r,alt:t,...i}=e;return k.jsx("img",{width:o,height:r,ref:s,alt:t,...i})});I.displayName="NativeImage";const y=v(function(e,s){const{fallbackSrc:o,fallback:r,src:t,srcSet:i,align:d,fit:u,loading:l,ignoreFallback:f,crossOrigin:n,fallbackStrategy:h="beforeLoadOrError",referrerPolicy:g,...a}=e,m=o!==void 0||r!==void 0,p=l!=null||f||!m,x=w({...e,crossOrigin:n,ignoreFallback:p}),E=O(x,h),F={ref:s,objectFit:u,objectPosition:d,...p?a:S(a,["onError","onLoad"])};return E?r||k.jsx(j.img,{as:I,className:"chakra-image__placeholder",src:o,...F}):k.jsx(j.img,{as:I,src:t,srcSet:i,crossOrigin:n,loading:l,referrerPolicy:g,className:"chakra-image",...F})});y.displayName="Image";export{y as I};
